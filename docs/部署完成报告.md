# Smart Learning ç³»ç»Ÿéƒ¨ç½²å®ŒæˆæŠ¥å‘Š

## ğŸ“… éƒ¨ç½²æ—¶é—´
2026å¹´1æœˆ23æ—¥

## âœ… éƒ¨ç½²çŠ¶æ€
**æˆåŠŸéƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨ 123.57.6.26**

---

## ğŸ¯ éƒ¨ç½²ä¼˜åŒ–

### 1. é•œåƒæºä¼˜åŒ–
- âœ… Debianæºï¼šä½¿ç”¨é˜¿é‡Œäº‘é•œåƒï¼ˆmirrors.aliyun.comï¼‰
- âœ… PyPIæºï¼šä½¿ç”¨é˜¿é‡Œäº‘é•œåƒï¼ˆ18.28 MB/sï¼‰
- âœ… npmæºï¼šä½¿ç”¨æ·˜å®é•œåƒï¼ˆregistry.npmmirror.comï¼‰
- âœ… Dockeré•œåƒï¼šé…ç½®å›½å†…åŠ é€Ÿæº

### 2. è·¨å¹³å°å…¼å®¹æ€§
- âœ… Mac â†’ Linux ä¾èµ–åŒ…å¤„ç†
- âœ… ä½¿ç”¨ `--platform linux/amd64` æ„å»º
- âœ… æ·»åŠ  `--prefer-binary` è·³è¿‡ç¼–è¯‘

### 3. ç«¯å£é…ç½®ï¼ˆé¿å…å†²çªï¼‰
- PostgreSQL: `5433:5432`ï¼ˆé¿å…ä¸å…¶ä»–åº”ç”¨å†²çªï¼‰
- Redis: `6380:6380`
- åç«¯API: `8001:8000`
- å‰ç«¯: `3002:3000`ï¼ˆnce-backendå ç”¨3001ï¼‰
- Nginx HTTP: `8090:80`
- Nginx HTTPS: `8453:443`

---

## ğŸ³ Dockerå®¹å™¨çŠ¶æ€

```
NAMES                    STATUS                   PORTS
smartlearning-nginx      Up                       8090->80, 8453->443
smartlearning-frontend   Up                       3002->3000
smartlearning-backend    Up                       8001->8000
smartlearning-postgres   Up (healthy)             5433->5432
smartlearning-redis      Up (healthy)             6380->6380
```

---

## ğŸŒ è®¿é—®ä¿¡æ¯

### å¤–éƒ¨è®¿é—®
- **HTTP**: http://smarteduonline.cn ï¼ˆè‡ªåŠ¨é‡å®šå‘åˆ°HTTPSï¼‰
- **HTTPS**: https://smarteduonline.cn âœ…
- **HTTPS**: https://www.smarteduonline.cn âœ…

### å†…éƒ¨è®¿é—®ï¼ˆæœåŠ¡å™¨ä¸Šï¼‰
- åç«¯API: http://localhost:8001
- å‰ç«¯: http://localhost:3002
- å®¹å™¨Nginx: http://localhost:8090
- åç«¯å¥åº·æ£€æŸ¥: http://localhost:8001/health

---

## ğŸ” SSLè¯ä¹¦

- **è¯ä¹¦æ¥æº**: Let's Encrypt
- **è¯ä¹¦è·¯å¾„**: `/etc/letsencrypt/live/nce.smarteduonline.cn/`
- **æ”¯æŒåŸŸå**: 
  - smarteduonline.cn âœ…
  - www.smarteduonline.cn âœ…
  - nce.smarteduonline.cn âœ…
- **è¯ä¹¦æœ‰æ•ˆæœŸ**: éœ€å®šæœŸç»­æœŸï¼ˆLet's Encrypt 90å¤©ï¼‰

---

## ğŸ“‹ æœåŠ¡éªŒè¯ç»“æœ

### 1. å®¹å™¨çŠ¶æ€
âœ… æ‰€æœ‰5ä¸ªå®¹å™¨æ­£å¸¸è¿è¡Œ

### 2. åç«¯å¥åº·æ£€æŸ¥
```json
{"status":"healthy"}
```
âœ… åç«¯æœåŠ¡æ­£å¸¸

### 3. å‰ç«¯æœåŠ¡
```
âœ“ Ready in 527ms
- Local:   http://c1c4a34fa204:3000
- Network: http://172.18.0.5:3000
```
âœ… å‰ç«¯æœåŠ¡æ­£å¸¸

### 4. Nginxä»£ç†
- âœ… å®¹å™¨å†…Nginxæ­£å¸¸ï¼ˆç«¯å£8090ï¼‰
- âœ… ä¸»Nginxæ­£å¸¸ï¼ˆç«¯å£80/443ï¼‰
- âœ… HTTPè‡ªåŠ¨é‡å®šå‘åˆ°HTTPS
- âœ… HTTPSè¯ä¹¦æœ‰æ•ˆ

---

## ğŸ”§ é…ç½®æ–‡ä»¶ä½ç½®

### æœåŠ¡å™¨ä¸Š
- é¡¹ç›®ç›®å½•: `/root/smart-learning-system/`
- Dockeré…ç½®: `/root/smart-learning-system/docker-compose.yml`
- ç¯å¢ƒå˜é‡: `/root/smart-learning-system/.env`
- ä¸»Nginxé…ç½®: `/etc/nginx/conf.d/smartlearning.conf`
- SSLè¯ä¹¦: `/root/ssl/` å’Œ `/etc/letsencrypt/live/nce.smarteduonline.cn/`

### æœ¬åœ°
- é¡¹ç›®ç›®å½•: `/Users/duanxiaofei/Desktop/æ•°ç©æ™ºå­¦/`
- SSHå¯†é’¥: `/Users/duanxiaofei/Desktop/æ•°ç©æ™ºå­¦/duanxiaofei_key01.pem`

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–æ•ˆæœ

### æ„å»ºé€Ÿåº¦å¯¹æ¯”
| ä¼˜åŒ–é¡¹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|--------|--------|--------|------|
| åç«¯æ„å»º | ~25åˆ†é’Ÿ | ~8åˆ†é’Ÿ | 3å€+ |
| å‰ç«¯æ„å»º | ~20åˆ†é’Ÿ | ~10åˆ†é’Ÿ | 2å€+ |
| ä¾èµ–ä¸‹è½½ | å›½å¤–æºæ…¢ | å›½å†…æºå¿« | 5å€+ |

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. ä¸å½±å“å…¶ä»–åº”ç”¨
âœ… ä½¿ç”¨ç‹¬ç«‹ç«¯å£ï¼Œä¸ä¼šå½±å“æœåŠ¡å™¨ä¸Šçš„å…¶ä»–åº”ç”¨ï¼ˆå¦‚nce-learningï¼‰

### 2. ç«¯å£æ˜ å°„
- ä¸»Nginxç›‘å¬80å’Œ443ç«¯å£
- ä»£ç†åˆ°å®¹å™¨Nginxçš„8090ç«¯å£
- æ‰€æœ‰smartlearningå®¹å™¨ä½¿ç”¨ç‹¬ç«‹ç«¯å£

### 3. SSLè¯ä¹¦ç»­æœŸ
- Let's Encryptè¯ä¹¦90å¤©æœ‰æ•ˆæœŸ
- å»ºè®®è®¾ç½®è‡ªåŠ¨ç»­æœŸï¼š`certbot renew`

### 4. æ•°æ®æŒä¹…åŒ–
æ‰€æœ‰æ•°æ®é€šè¿‡Docker volumesæŒä¹…åŒ–ï¼š
- `postgres_data`: æ•°æ®åº“æ•°æ®
- `redis_data`: Redisæ•°æ®
- `backend_uploads`: ä¸Šä¼ æ–‡ä»¶
- `nginx_logs`: Nginxæ—¥å¿—

---

## ğŸš€ å¸¸ç”¨è¿ç»´å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
cd /root/smart-learning-system
docker-compose ps
```

### æŸ¥çœ‹æ—¥å¿—
```bash
docker logs smartlearning-backend -f
docker logs smartlearning-frontend -f
docker logs smartlearning-nginx -f
```

### é‡å¯æœåŠ¡
```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
docker-compose restart

# é‡å¯å•ä¸ªæœåŠ¡
docker-compose restart backend
docker-compose restart frontend
docker-compose restart nginx
```

### åœæ­¢æœåŠ¡
```bash
docker-compose down
```

### å¯åŠ¨æœåŠ¡
```bash
docker-compose up -d
```

### æ›´æ–°ä»£ç å¹¶é‡æ–°éƒ¨ç½²
```bash
# åœ¨æœ¬åœ°æ‰§è¡Œ
cd /Users/duanxiaofei/Desktop/æ•°ç©æ™ºå­¦
./deploy.sh
```

---

## ğŸ‰ éƒ¨ç½²æ€»ç»“

1. âœ… å‰åç«¯Dockeré•œåƒæ„å»ºæˆåŠŸ
2. âœ… æ‰€æœ‰æœåŠ¡å®¹å™¨æ­£å¸¸è¿è¡Œ
3. âœ… SSLè¯ä¹¦é…ç½®æˆåŠŸ
4. âœ… ä¸»Nginxåå‘ä»£ç†é…ç½®æˆåŠŸ
5. âœ… HTTPè‡ªåŠ¨é‡å®šå‘åˆ°HTTPS
6. âœ… åç«¯APIå¥åº·æ£€æŸ¥é€šè¿‡
7. âœ… å‰ç«¯æœåŠ¡æ­£å¸¸å“åº”
8. âœ… ä¸å½±å“æœåŠ¡å™¨ä¸Šå…¶ä»–åº”ç”¨
9. âœ… ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€Ÿæ„å»º

**éƒ¨ç½²å®Œæˆï¼ç³»ç»Ÿå·²æˆåŠŸä¸Šçº¿ï¼** ğŸŠ

---

## ğŸ“ é—®é¢˜æ’æŸ¥

å¦‚é‡é—®é¢˜ï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºæ’æŸ¥ï¼š

1. **æ£€æŸ¥å®¹å™¨çŠ¶æ€**
   ```bash
   docker ps -a | grep smartlearning
   ```

2. **æŸ¥çœ‹å®¹å™¨æ—¥å¿—**
   ```bash
   docker logs smartlearning-backend --tail 50
   docker logs smartlearning-frontend --tail 50
   docker logs smartlearning-nginx --tail 50
   ```

3. **æ£€æŸ¥ç«¯å£ç›‘å¬**
   ```bash
   netstat -tulpn | grep -E ':(8090|8001|3002|5433|6380)'
   ```

4. **æµ‹è¯•æœåŠ¡è¿é€šæ€§**
   ```bash
   curl http://localhost:8001/health
   curl http://localhost:8090
   curl -I https://smarteduonline.cn
   ```

5. **æ£€æŸ¥ä¸»Nginxé…ç½®**
   ```bash
   nginx -t
   systemctl status nginx
   ```
