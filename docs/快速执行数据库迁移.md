# 快速执行数据库迁移

## 问题
后端返回500错误，原因是数据库表 `course_qa_session` 和 `course_qa_message` 尚未创建。

## 解决方案

### 方法1：使用psql命令行（推荐）

```bash
# 1. 进入项目目录
cd /Users/duanxiaofei/Desktop/数珩智学

# 2. 执行迁移脚本
psql -U postgres -d smartlearning -f backend/migrations/create_course_qa_tables.sql
```

### 方法2：如果使用Docker

```bash
# 查找PostgreSQL容器名
docker ps | grep postgres

# 执行迁移（替换 container_name 为实际的容器名）
docker exec -i container_name psql -U postgres -d smartlearning < backend/migrations/create_course_qa_tables.sql
```

### 方法3：手动执行SQL

如果上述方法都不行，可以手动连接到数据库执行：

```bash
# 连接到数据库
psql -U postgres -d smartlearning

# 然后复制 backend/migrations/create_course_qa_tables.sql 文件的内容，粘贴执行
```

## 验证

执行迁移后，验证表是否创建成功：

```sql
-- 连接到数据库
psql -U postgres -d smartlearning

-- 检查表是否存在
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
AND table_name IN ('course_qa_session', 'course_qa_message');
```

如果看到两行结果，说明表创建成功。

## 执行后

1. **重启后端服务**（如果正在运行）
2. **刷新前端页面**
3. **点击浮动按钮测试功能**

## 如果仍然报错

请查看后端控制台的详细错误信息，并告诉我具体的错误内容。
